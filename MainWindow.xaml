<Window x:Class="WpfOpenCvApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SnapyForge" Height="500" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#181818"
        FontFamily="Segoe UI" FontSize="14"
        AllowDrop="True"
        DragEnter="Window_DragEnter"
        Drop="Window_Drop">

    <Window.InputBindings>
        <KeyBinding Key="Space" Command="{Binding PlayPauseCommand}" />
        <KeyBinding Key="S" Command="{Binding ScreenshotCommand}" />
        <KeyBinding Key="Escape" Command="{Binding StopCommand}" />
    </Window.InputBindings>


    <Window.Resources>
        <Style x:Key="TrendyButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#2A2D3E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="12">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="0" BlurRadius="12" Color="Black" Opacity="0.3"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#3A3E52"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#50546A"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.4"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <!-- Video -->
            <RowDefinition Height="Auto" />
            <!-- Time -->
            <RowDefinition Height="Auto" />
            <!-- Controls -->
            <RowDefinition Height="Auto" />
            <!-- Progress -->
        </Grid.RowDefinitions>

        <!-- Video Display -->
        <Border Grid.Row="0" Background="#252526" BorderThickness="2" CornerRadius="12" BorderBrush="#FF007ACC">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="0" BlurRadius="10" Opacity="0.3" Color="Black"/>
            </Border.Effect>
            <Border x:Name="VideoContainer" BorderBrush="Transparent" BorderThickness="4" CornerRadius="10">
                <Image x:Name="VideoDisplay" />
            </Border>

        </Border>

        <!-- Controls -->
        <Grid Grid.Row="2" Margin="10,15,10,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Screenshot Count -->
            <StackPanel Grid.Column="0" Orientation="Vertical" HorizontalAlignment="Left">
                <TextBlock Text="Count"
                           Foreground="#BBBBBB"
                           FontSize="13"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,4"/>
                <Border Background="#2D2D30"
                        CornerRadius="8"
                        Padding="6"
                        Width="120"
                        BorderBrush="#3A3A3D"
                        BorderThickness="1">
                    <TextBox x:Name="ScreenshotCountTextBox"
                             Background="Transparent"
                             Foreground="White"
                             BorderThickness="0"
                             Text="50"
                             HorizontalContentAlignment="Center"
                             VerticalContentAlignment="Center"
                             FontSize="14"
                             CaretBrush="White"
                             ToolTip="Enter how many screenshots to capture"
                             PreviewTextInput="ScreenshotCountTextBox_PreviewTextInput"
                             DataObject.Pasting="ScreenshotCountTextBox_Pasting"/>
                </Border>
            </StackPanel>

           
            <WrapPanel Grid.Column="1" HorizontalAlignment="Left" Margin="81,0,0,0">
                <Button Style="{StaticResource TrendyButtonStyle}" Click="PlayVideo_Click" ToolTip="Play">
                    <TextBlock FontFamily="Segoe MDL2 Assets"
                               Text="&#xE768;"   
                               FontSize="20"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               Foreground="White"/>
                </Button>

                <Button Style="{StaticResource TrendyButtonStyle}" Click="PauseVideo_Click" ToolTip="Pause">
                    <TextBlock FontFamily="Segoe MDL2 Assets"
           Text="&#xE769;"   
           FontSize="20"
           VerticalAlignment="Center"
           HorizontalAlignment="Center"
           Foreground="White"/>
                </Button>
                <Button Style="{StaticResource TrendyButtonStyle}" Click="StopVideo_Click" ToolTip="Stop" Background="#D32F2F">
                    <TextBlock FontFamily="Segoe MDL2 Assets"
Text="&#xE15B;"   
FontSize="20"
VerticalAlignment="Center"
HorizontalAlignment="Center"
Foreground="White"/>
                </Button>
                <Button Style="{StaticResource TrendyButtonStyle}" Click="StartTakingScreenshots_Click" ToolTip="Start Screenshots">
                    <TextBlock FontFamily="Segoe MDL2 Assets"
Text="&#xE710;"   
FontSize="20"
VerticalAlignment="Center"
HorizontalAlignment="Center"
Foreground="White"/>
                </Button>
                <Button Style="{StaticResource TrendyButtonStyle}" Click="StopTakingScreenshots_Click" ToolTip="Stop Screenshots">
                    <TextBlock FontFamily="Segoe MDL2 Assets"
Text="&#xE15B;"   
FontSize="20"
VerticalAlignment="Center"
HorizontalAlignment="Center"
Foreground="White"/>
                </Button>
                <Button Style="{StaticResource TrendyButtonStyle}" Click="DynamicBatchScreenshot_Click" ToolTip="Batch Screenshots">
                    <TextBlock FontFamily="Segoe MDL2 Assets"
Text="&#xE762;"   
FontSize="20"
VerticalAlignment="Center"
HorizontalAlignment="Center"
Foreground="White"/>
                </Button>
            </WrapPanel>


        </Grid>

        <!-- Progress Bars -->
        <StackPanel Grid.Row="3" Margin="10,0,10,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Current Time -->
                <TextBlock x:Name="CurrentTimeText"
                   Text="00:00"
                   Foreground="#D4D4D4"
                   FontSize="14"
                   VerticalAlignment="Center"
                   Margin="0,0,8,0"
                   Grid.Column="0"/>

                <!-- Slider -->
                <Slider x:Name="ProgressBar"
                Grid.Column="1"
                Height="21"
                Minimum="0"
                Maximum="100"
                IsEnabled="False"
                ValueChanged="ProgressBar_ValueChanged"
                Foreground="#FF007ACC"
                Background="#2D2D30"
                VerticalAlignment="Center"/>

                <!-- Duration -->
                <TextBlock x:Name="VideoDurationText"
                   Text="00:00"
                   Foreground="#D4D4D4"
                   FontSize="14"
                   VerticalAlignment="Center"
                   Margin="8,0,0,0"
                   Grid.Column="2"/>
            </Grid>

            <!-- Screenshot Progress -->
            <ProgressBar x:Name="ScreenshotProgressBar"
                 Height="20"
                 Minimum="0"
                 Maximum="100"
                 Foreground="#FF007ACC"
                 Background="#2D2D30"
                 Visibility="Collapsed"
                 Margin="0,10,0,0"
                 IsIndeterminate="False"/>
        </StackPanel>

    </Grid>
</Window>
